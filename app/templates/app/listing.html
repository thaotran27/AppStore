{% load static %}
<html>
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
    
        <!-- Bootstrap CSS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
        
        <script>
            function updateTextInput_min(val) {
                document.getElementById('min_textInput').value=val; 
            }
            function updateTextInput_max(val) {
                document.getElementById('max_textInput').value=val; 
            }

            function updateTextInput_memsizemin(val) {
                document.getElementById('mem_min').value=val; 
            }
            function updateTextInput_memsizemax(val) {
                document.getElementById('mem_max').value=val; 
            }
            // var input = document.getElementById('input'),
            // output = document.getElementById('output');

            // input.oninput = function(){
            //     document.getElementById('output').value=values[this.value]; 
            // };
            // input.oninput(); //set default value
        </script>
        <title>Home Page</title>
      </head>
    <style>
    .filterbtn {
        width: auto;
        padding: 5px 20px;
        background-color: #03c61d;
        color: rgb(255, 255, 255);
        border-radius: 5px;
    }
    </style>
<body>
    <div class="container-fluid">
        <div>
        <h1>GPU Listing</h1>
        
        <img src="https://cdn.eteknix.com/wp-content/uploads/2016/09/Logo-on-white.jpg" width="20%"   alt="NUS logo"/><br/>
        <a href="{% url 'add_listing' %}"><button class="btn btn-primary">List New GPU</button></a>
        <a href="{% url 'del_listing' %}"><button class="btn btn-secondary">Delete Listing</button></a>
        <br/>
        <br/>
        
        <form  action="/listing/" method="get" id="filter">
            <label for="filter">Filter:</label>
                <select name="filter" id="filter">
                    <option value="Reset">--</option>
                    <option value=1>Most recent</option>
                    <option value=2>Least recent</option>
                    <option value=3>Price High to Low</option>
                    <option value=4>Price Low to High</option>
                </select>
            <br/><br/>
            <label for="dur">View most rented GPU:</label>
                <select name="month" id="month">
                    <option value="Reset">Month</option>
                    <option value="1">Jan</option>
                    <option value="2">Feb</option>
                    <option value="3">Mar</option>
                    <option value="4">Apr</option>
                    <option value="5">May</option>
                    <option value="6">Jun</option>
                    <option value="7">Jul</option>
                    <option value="8">Aug</option>
                    <option value="9">Sep</option>
                    <option value="10">Oct</option>
                    <option value="11">Nov</option>
                    <option value="12">Dec</option>
                </select>
                <select name="year" id="year">
                    <option value="Reset">Year</option>
                    <option value="2020">2020</option>
                    <option value="2021">2021</option>
                    <option value="2022">2022</option>
                    <option value="2023">2023</option>
                </select>
                <br/><br/>
            <p>Minimum price</p>
            <input type="range" name="min_price_filter" value="0" min="0" max={{max_price.0}} onchange="updateTextInput_min(this.value);">
            <input style="border: 0" type="text" id="min_textInput" value="" disabled>
            <br>
            <p>Maximum price</p>
            <input type="range" name="max_price_filter" value={{max_price.0}}  min="0" max={{max_price.0}} onchange="updateTextInput_max(this.value);">
            <input style="border: 0" type="text" id="max_textInput" value="" disabled>
            <p>Minimum Memory Size</p>
            <input id="input" name="mem_min" type="range" min="0" value="0" max={{max_memsize.0}} onchange="updateTextInput_memsizemin(this.value);">
            <input style="border: 0" type="text" id="mem_min" value="" disabled>
            <p>Maximum Memory Size</p>
            <input id="input"  name="mem_max" type="range" min="0" value={{max_memsize.0}} max={{max_memsize.0}} onchange="updateTextInput_memsizemax(this.value);">
            <input style="border: 0" type="text" id="mem_max" value="" disabled>
            <input type="submit" class="filterbtn" value="Filter">
        </form>
        <p class="badge bg-secondary">{{num2}} out of {{num.0}} result(s)</p>
        <table class="table" border=1>
            <thead class="thead-dark">
                <th>Listing Number</th>
                <th>GPU Model</th>
                <th>GPU Name</th>
                <th>Price</th>
                <th>Available Start Date</th>
                <th>Available End Date</th>
                <th>Action</th>
            </thead>
            {% for listing in records %}
            <tr>
                <td> {{ listing.0 }} </td>
                <td> 
                    <a href="{% url 'view_listing'  listing.0  %}">{{ listing.1 }}</a>
                </td>

                <td> {{ listing.2 }} </td>
                <td> {{ listing.6 }} </td>
                <td> {{ listing.4 }}</td>
                <td> {{ listing.5 }}</td>
                <td> <a href="{% url 'rental'  listing.0  %}"><button class="btn btn-info">Rent</button></a></td>
            </tr>
            {% endfor %}
        </table>
    </div>
    <div class="position-absolute top-0 end-0" style="padding: 4rem;">
        <a  href="{% url 'personal' current_user.3 %}"><button class="btn btn-info">{{current_user.0}}</button></a>
        <p>Balance: {{current_user.4}}</p>
        <a href="{% url 'top_up' %}"><button class="btn btn-primary">Top up balance</button></a>
        <br/><br/>
        <a href="{% url 'log_out' %}"><button class="btn btn-danger" class="logoutbtn">Logout</button></a>
    </div>
</div>
</body>
</html>
